---
- name: Get Memory Total
  hosts: all
  gather_facts: false
  vars:
    ansible_python_interpreter: /bin/true
  tasks:
    - name: Get Memory Total
      ansible.builtin.raw: |
        echo "$(grep MemTotal /proc/meminfo | awk '{print $2}' 2>/dev/null || echo "0")"
      register: result
      changed_when: false